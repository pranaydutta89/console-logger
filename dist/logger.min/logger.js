var consoleLogger;!function(e){!function(e){!function(e){e[e.sessionStorage=0]="sessionStorage",e[e.json=1]="json",e[e.console=2]="console",e[e.msSaveBlob=3]="msSaveBlob"}(e.browserFeatureCheck||(e.browserFeatureCheck={}));var t=(e.browserFeatureCheck,function(){function e(){}return e.prototype.ieVersion=function(){for(var e=3,t=document.createElement("div"),o=t.getElementsByTagName("i");t.innerHTML="<!--[if gt IE "+ ++e+"]><i></i>< ![endif]-->",o[0];);return e>4?e:void 0},e.prototype.isFeaturePresent=function(e){switch(e){case 0:if(window.sessionStorage&&"undefined"!=typeof sessionStorage)return!0;break;case 1:if("undefined"!=typeof JSON)return!0;break;case 2:if("undefined"!=typeof console||window.console)return!0;break;case 3:return window.navigator.msSaveOrOpenBlob?!0:!1}return!1},e.prototype.trim=function(e){try{return e.toString().trim()}catch(t){return e.toString().replace(/^\s+|\s+$/gm,"")}},e}());e.utilities=t}(e.utils||(e.utils={}));e.utils}(consoleLogger||(consoleLogger={}));var consoleLogger;!function(e){e.utilsClass=new e.utils.utilities;e.utils;!function(e){e[e.warn=1]="warn",e[e.fatal=2]="fatal",e[e.error=3]="error",e[e.debug=4]="debug",e[e.log=5]="log",e[e.info=6]="info"}(e.logType||(e.logType={}));var t=e.logType;!function(e){e[e.jsonNotPresent=0]="jsonNotPresent",e[e.ajaxError=1]="ajaxError",e[e.historyEmpty=2]="historyEmpty",e[e.configNotDone=3]="configNotDone"}(e.errorType||(e.errorType={}));var o=(e.errorType,function(){function e(){this.browserDetails=window.navigator.userAgent}return e}());e.logWrapperClass=o;var s=function(){function e(){this.toSend=1,this.isFramework=!1}return e}();e.sendDataSettings=s;var n=function(){function n(t,o,s){var n=this;this.logging=!0,this.showAsHtml=!1,this.logHistory=[],this.error=function(e){var t=n.performCommonJob(e,3);return n.sendDataToService(t),t},this.fatal=function(e){var t=n.performCommonJob(e,2);return n.sendDataToService(t),t},this.debug=function(e){var t=n.performCommonJob(e,4);return n.sendData&&2==n.sendData.toSend&&n.sendDataToService(t),t},this.warn=function(e){var t=n.performCommonJob(e,1);return n.sendData&&2==n.sendData.toSend&&n.sendDataToService(t),t},o&&(this.showAsHtml=o,this.createDom(e.utilsClass.isFeaturePresent(3)?'<div style="text-align: center"><input type="button" value="Download Log" onclick="consoleLogger.downLoadLog()"/> </div>':"<label>Browser does not support BLOB</label>")),this.logging=t,this.config(s)}return n.prototype.config=function(e){e&&(this.sendData=new s,e.toSend&&(this.sendData.toSend=e.toSend),e.url&&(this.sendData.url=e.url),e.isFramework&&(this.sendData.isFramework=e.isFramework))},n.prototype.pushHistoryData=function(t){if(e.utilsClass.isFeaturePresent(0)&&e.utilsClass.isFeaturePresent(1)){var o=[];window.sessionStorage.logHistory&&(o=JSON.parse(window.sessionStorage.logHistory)),o.push(t),window.sessionStorage.logHistory=JSON.stringify(o)}else this.logHistory.push(t)},n.prototype.performCommonJob=function(e,t){var o=this.messageFormatting(e);return o.messageType=t,this.pushHistoryData(o),this.showLog(o),this.showLogAsHtml(o),o},n.prototype.messageFormatting=function(t){var s=new o;return s.eventDT=new Date,"object"==typeof t?(s.message=t.message?e.utilsClass.trim(t.message):"NA",s.stack=t.stack?e.utilsClass.trim(t.stack):"NA"):"string"==typeof t?(s.message=e.utilsClass.trim(t),s.stack="NA"):(s.message="UnSupported format, logging actual data:"+t,s.stack="NA"),s},n.prototype.showLog=function(o){if(e.utilsClass.isFeaturePresent(2)&&this.logging&&o){var s;switch(s=o.messageType&&5!==o.messageType?"Type:"+t[o.messageType]+"\n\nMessage:"+o.message+"\n\nStack:"+o.stack||"NA\n\nEvent Time:"+o.eventDT:o.message,o.messageType){case 1:console.warn(s);break;case 2:case 3:console.error(s);break;case 6:console.info(s);break;case 4:case 5:console.log(s)}}},n.prototype.downLoadLog=function(){var e=new Blob(["ddd"],{type:"text/csv;charset=utf-8;"});window.navigator.msSaveBlob(e,"check.csv")},n.prototype.showLogAsHtml=function(e){this.showAsHtml&&e&&this.createDom(e.messageType&&5!==e.messageType?'<div style="padding: 2%;text-align: center;font-family: "Bookman", Georgia, "Times New Roman", serif"><strong>Type:</strong>'+t[e.messageType]+"<br/><strong>Message:</strong>"+e.message+"<br/><strong>Stack:</strong>"+e.stack+"<br/><strong>Event Time:</strong>"+e.eventDT+"<br/></div><br/>":'<div style="padding: 2%;text-align: center;font-family: "Bookman", Georgia, "Times New Roman", serif"><strong>Type:</strong>Log<br/><strong>Message:</strong>'+e.message+"</div><br/>")},n.prototype.createDom=function(e){var t=document.getElementsByTagName("body")[0],o=document.createElement("div");o.innerHTML=e,t.appendChild(o)},n.prototype.handleError=function(e,t){switch(e){case 1:this.messageManager("Ajax Error:"+t||"");break;case 0:this.messageManager("Json is undefined ,try including json2/json3 "+t||"");break;case 2:this.messageManager("No recent activity yet!! "+t||"");break;case 3:this.messageManager("Initial config not done. "+t||"")}},n.prototype.getConfig=function(){return this.sendData},n.prototype.sendDataToService=function(t){if(this.sendData&&!this.sendData.isFramework){var o=this,s=new XMLHttpRequest;s.open("POST",this.sendData.url);var n;e.utilsClass.isFeaturePresent(1)?(s.setRequestHeader("Content-Type","application/json; charset=utf-8"),n=JSON.stringify(t)):(s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n="message="+t.message+"&messageType="+t.messageType+"&eventDT="+t.eventDT+"&stack="+t.stack+"&browserDetails="+t.browserDetails),s.send(n),s.onreadystatechange=function(){(4!=this.readyState||200!=this.status)&&o.handleError(1,this.statusText)}}},n.prototype.messageManager=function(e){var t=new o;t.message=e,t.messageType=5,this.showLog(t)},n.prototype.history=function(){if(e.utilsClass.isFeaturePresent(0)&&e.utilsClass.isFeaturePresent(1)){var t=JSON.parse(window.sessionStorage.logHistory);if(0==t.length)this.handleError(2);else for(var o in t)this.messageManager("Sr No:"+(parseInt(o,10)+1).toString()),this.showLog(t[o])}else if(0==this.logHistory.length)this.handleError(2);else for(var o in this.logHistory)this.messageManager("Sr No:"+(parseInt(o,10)+1).toString()),this.showLog(this.logHistory[o])},n}();e.logger=n}(consoleLogger||(consoleLogger={}));var consoleLogger;!function(e){e.app=function(){try{return angular.module("consoleLogger",[]).service(e)}catch(t){}}();var t=function(){function t(e){this.$http=e,this.isConfigDone=!1}return t.prototype.configNotDone=function(){this.loggerVar||(this.loggerVar=new e.logger(!0)),this.loggerVar.handleError(3)},t.prototype.config=function(t,o,s){this.isConfigDone=!0,s.isFramework=!0,this.loggerVar=new e.logger(t,o,s)},t.prototype.error=function(e){this.isConfigDone?this.sendDataToService(this.loggerVar.error(e)):this.configNotDone()},t.prototype.debug=function(e){this.isConfigDone?this.sendDataToService(this.loggerVar.debug(e)):this.configNotDone()},t.prototype.fatal=function(e){this.isConfigDone?this.sendDataToService(this.loggerVar.fatal(e)):this.configNotDone()},t.prototype.warn=function(e){this.isConfigDone?this.sendDataToService(this.loggerVar.warn(e)):this.configNotDone()},t.prototype.history=function(){this.isConfigDone?this.loggerVar.history():this.configNotDone()},t.prototype.sendDataToService=function(t){var o,s,n=this;e.utilsClass.isFeaturePresent(1)?(s="application/json; charset=utf-8",o=JSON.stringify(t)):(s="application/x-www-form-urlencoded",o="message="+t.message+"&messageType="+t.messageType+"&eventDT="+t.eventDT+"&stack="+t.stack+"&browserDetails="+t.browserDetails),this.$http({url:this.loggerVar.getConfig().url,method:"POST",data:o,withCredentials:!0,headers:{"Content-Type":s}}).then(function(){},function(e){n.loggerVar.handleError(1,e.statusText)})},t.$inject=["$http"],t}();e.loggerService=t}(consoleLogger||(consoleLogger={}));